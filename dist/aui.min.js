"use strict";function escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function uniqueStringArray(t){var e={};return t.forEach(function(t){e[t]=!0}),Object.keys(e)}function compileModuleSearch(){moduleSearch=new RegExp("\\b("+modules.map(function(t){return escapeRegExp(t)}).join("|")+")\\b","i")}function add$fn(t){return Array.isArray(t)||(t=[t]),modules=uniqueStringArray(modules.concat(t)),compileModuleSearch(),this}function remove$fn(t){return modules=uniqueStringArray(modules.filter(t)),compileModuleSearch(),this}function noop(){}var toArray=Function.prototype.call.bind(Array.prototype.slice),global=global||window,jQuery=global.jQuery,React=global.React||require("react/addons"),cloneWithProps=React.addons.cloneWithProps,modules=["accordion","api","checkbox","colorize","dimmer","dropdown","form","modal","dimmer","nag","popup","progress","rating","search","shape","sidebar","site","state","sticky","tab","transition","video","visibility","visit"],moduleSearch;compileModuleSearch(),/ios|iphone|ipad|ipod/i.test((navigator||{}).userAgent)&&jQuery("<style>*{cursor:pointer!important}</style>").appendTo("head");var AuiMixin={getInitialState:function(){return{}},componentWillMount:function(){function t(t,n,r){var i={};i[t]=n,e.setState(i,function(){i[t]=[],e.setState(i,r instanceof Function?r:noop)})}var e=this;this.behavior=function(e,n){return t.bind(this,e,n)}.bind(this),this.behaviors=function(e){var n=Array.isArray(e)?e.filter(function(t){return Array.isArray(t)&&"string"==typeof t[0]}).reduce(function(t,e){var n=e.unshift();t[n]=t[n]||[],t[n].push(e)},{}):e;return Object.keys(n).reduce(function(e,r){return n[r].reduce(function(e,n){return function(){t(r,n,e)}.bind(this)}.bind(this),e)}.bind(this),noop)}.bind(this)}},Aui=React.createClass({displayName:"Aui",propTypes:{children:React.PropTypes.element.isRequired},render:function(){function t(e){if(Array.isArray(e))return e.map(t);if(React.isValidElement(e)&&e.props&&e.props.noaui!==!0&&e.type!==Semantic&&e.type!==Aui){var n={className:Object.keys(e.props).filter(function(t){return e.props[t]===!0||moduleSearch.test(t)}).join(" ")};if(e.key&&(n.key=e.key),e.ref&&(n.ref=e.ref),e.props.children&&(n.children=t(e.props.children),(/\bform\b/.test(n.className)||/\bform\b/.test(e.props.className))&&(n.children=Array.isArray(n.children)?n.children:[n.children],e.props.onSubmit&&(n.onFormSubmit=e.props.onSubmit,n.onSubmit=null),n.children.unshift(React.createElement("input",{type:"submit",style:{display:"none"}})))),e=cloneWithProps(e,n),jQuery&&moduleSearch.test(e.props.className)&&!/\bicon\b/.test(e.props.className)&&jQuery.fn[moduleSearch.exec(e.props.className)[0]])return React.createElement(Semantic,{},e)}return e}return t(this.props.children)}}),Semantic=React.createClass({displayName:"Semantic",propTypes:{children:React.PropTypes.element.isRequired},getInitialState:function(){function t(e,n){return n.props&&(n.props.name&&(n.props.value||n.props.defaultValue)&&(e[n.props.name]=n.props.value||n.props.defaultValue),n.props.children&&(Array.isArray(n.props.children)?n.props.children.forEach(function(n){t(e,n)}):t(e,n.props.children))),e}return{formData:t({},this)}},onFormInput:function(t){var e=t.target;setTimeout(function(){var t=this.state.formData;t[e.name]=e.value,this.setState({formData:t})}.bind(this))},componentWillMount:function(){var t=this.props.children.props.onInput,e=this.onFormInput;this.bothFormOnInput=function(){e.apply(this,arguments),t&&t.apply(this,arguments)}},render:function(){return this.props.children.props.form?cloneWithProps(this.props.children,{onInput:this.bothFormOnInput}):this.props.children},componentDidMount:function(){function t(t){var e=t.filter("select,input")[0]||t.parents(".dropdown:first").find("select,input")[0]||t[0]||r[0];this.type="input",this.timeStamp=Date.now(),this.target=e,this.preventDefault=this.isPersistent=this.isDefaultPrevented=this.isPropagationStopped=this.destructor=this.spotPropagation=noop}var e=this,n=e.props.children.props,r=jQuery(e.getDOMNode()),i=e.bothFormOnInput;n.name&&r.attr("data-name",n.name),n.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(o){var a=n[o];if(a){a=Array.isArray(a)?a:[a],"settings"===a[0]&&a.shift();var s=a[a.length-1]=a[a.length-1]||{};if(s===!0&&(s=a[a.length-1]={}),"form"===o&&(a[1]||(a[1]={}),n.onFormSubmit&&(a[1].onSuccess=function(t){t.isTrigger?(t.data=e.state.formData,n.onFormSubmit.apply(this,arguments)):t.preventDefault()}),s=a[1],setTimeout(function(){r.find("[data-name]").each(function(t,n){var r=jQuery(n),i=e.state.formData;i[r.attr("data-name")]=r.val()})})),"object"==typeof s){var p=s.onChange;Object.keys(n).filter(function(t){return/^on[A-Z]/.test(t)}).map(function(t){/^on(Input|Change)$/.test(t)||(s[t]=n[t]),r.data(t,n[t])}),"form"===o&&r.data("onInput",i),s.onChange=function(){var e=jQuery(this);setTimeout(function(){p&&p.apply(this,arguments),n.onInput&&n.onInput.call(this,new t(e)),n.onChange&&n.onChange.call(this,new t(e));var r=e.parents(".form:first");r[0]&&(r.data("onChange")&&r.data("onChange").call(this,new t(e)),r.data("onInput")&&r.data("onInput").call(this,new t(e)))}.bind(this,arguments))}}r[o].apply(r,a),n.name&&setTimeout(function(){var e=r.parents(".form:first").data("onInput");e&&e(new t(r))})}})},componentWillReceiveProps:function(t){t=t.children.props;var e=this,n=jQuery(e.getDOMNode());t.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(e){var r=Array.isArray(t[e])?t[e]:[t[e]];"string"==typeof r[0]&&("settings"===r[0]&&r.shift(),n[e].apply(n,r))})}});if(!module)var module={},exports;module.exports=exports=global.Aui=Aui,exports.Aui=Aui,exports.Mixin=exports.AuiMixin=AuiMixin,exports.Semantic=Semantic,exports.add$fn=add$fn,jQuery&&(exports.api=jQuery.fn.api);