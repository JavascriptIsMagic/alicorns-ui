"use strict";var global=global||window,jQuery=global.jQuery,React=global.React||require("react/addons"),cloneWithProps=React.addons.cloneWithProps,modules=["accordion","api","checkbox","colorize","dimmer","dropdown","form","modal","dimmer","nag","popup","progress","rating","search","shape","sidebar","site","state","sticky","tab","transition","video","visibility","visit"],moduleSearch=new RegExp("\\b("+modules.join("|")+")\\b","i"),Aui=React.createClass({displayName:"Aui",propTypes:{children:React.PropTypes.element.isRequired},render:function(){function t(e){if(Array.isArray(e))return e.map(t);if(React.isValidElement(e)&&e.props&&e.props.noaui!==!0&&e.type!==Semantic){var n={className:Object.keys(e.props).filter(function(t){return e.props[t]===!0||moduleSearch.test(t)}).join(" ")};if(e.key&&(n.key=e.key),e.ref&&(n.ref=e.ref),e.props.children&&(n.children=t(e.props.children),(/\bform\b/.test(n.className)||/\bform\b/.test(e.props.className))&&(n.children=Array.isArray(n.children)?n.children:[n.children],e.props.onSubmit&&(n.onFormSubmit=e.props.onSubmit,n.onSubmit=null),n.children.unshift(React.createElement("input",{type:"submit",style:{display:"none"}})))),e=cloneWithProps(e,n),jQuery&&moduleSearch.test(e.props.className)&&jQuery.fn[moduleSearch.exec(e.props.className)[0]])return React.createElement(Semantic,{},e)}return e}return t(this.props.children)}}),Semantic=React.createClass({displayName:"Semantic",propTypes:{children:React.PropTypes.element.isRequired},getInitialState:function(){return{formData:{}}},onFormInput:function(t){var e=t.target;setTimeout(function(){var t=this.state.formData;t[e.name]=e.value,this.setState({formData:t})}.bind(this))},componentWillMount:function(){var t=this.props.children.props.onInput,e=this.onFormInput;this.bothFormOnInput=function(){e.apply(this,arguments),t&&t.apply(this,arguments)}},render:function(){return this.props.children.props.form?cloneWithProps(this.props.children,{onInput:this.bothFormOnInput}):this.props.children},componentDidMount:function(){function t(){}function e(e){var n=e.filter("select,input")[0]||e.parents(".dropdown:first").find("select,input")[0]||e[0]||i[0];this.type="input",this.timeStamp=Date.now(),this.target=n,this.preventDefault=this.isPersistent=this.isDefaultPrevented=this.isPropagationStopped=this.destructor=this.spotPropagation=t}var n=this,r=n.props.children.props,i=jQuery(n.getDOMNode()),a=n.bothFormOnInput;r.name&&i.attr("data-name",r.name),r.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(t){var o=r[t];if(o){o=Array.isArray(o)?o:[o];var s=o[o.length-1]=o[o.length-1]||{};if(s===!0&&(s=o[o.length-1]={}),"form"===t&&(o[1]||(o[1]={}),r.onFormSubmit&&(o[1].onSuccess=function(t){t.isTrigger?(t.data=n.state.formData,r.onFormSubmit.apply(this,arguments)):t.preventDefault()}),s=o[1],setTimeout(function(){i.find("[data-name]").each(function(t,e){var r=jQuery(e),i=n.state.formData;i[r.attr("data-name")]=r.val()})})),"object"==typeof s){var p=s.onChange;Object.keys(r).filter(function(t){return/^on[A-Z]/.test(t)}).map(function(t){/^on(Input|Change)$/.test(t)||(s[t]=r[t]),i.data(t,r[t])}),"form"===t&&i.data("onInput",a),s.onChange=function(t,n,i){p&&p.apply(this,arguments),r.onInput&&r.onInput.call(this,new e(i)),r.onChange&&r.onChange.call(this,new e(i));var a=i.parents(".form:first");a[0]&&(a.data("onChange")&&a.data("onChange").call(this,new e(i)),a.data("onInput")&&a.data("onInput").call(this,new e(i)))}}i[t].apply(i,o),r.name&&setTimeout(function(){var t=i.parents(".form:first").data("onInput");t&&t(new e(i))})}})},behaviors:{},componentWillReceiveProps:function(t){t=t.children.props;var e=this,n=jQuery(e.getDOMNode());t.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(r){var i=Array.isArray(t[r])?t[r]:[t[r]];"string"==typeof i[0]&&e.behaviors[r]!==JSON.stringify(i)&&(e.behaviors[r]=JSON.stringify(i),n[r].apply(n,i))})},componentWillUnmount:function(){jQuery(this.getDOMNode()).remove()}});if(!module)var module={},exports;module.exports=exports=global.Aui=Aui,exports.Aui=Aui,exports.Semantic=Semantic,jQuery&&(exports.api=jQuery.fn.api);