"use strict";var global=global||window,jQuery=global.jQuery,React=global.React||require("react/addons"),cloneWithProps=React.addons.cloneWithProps,modules=["accordion","api","checkbox","colorize","dimmer","dropdown","form","modal","dimmer","nag","popup","progress","rating","search","shape","sidebar","site","state","sticky","tab","transition","video","visibility","visit"],moduleSearch=new RegExp("\\b("+modules.join("|")+")\\b","i"),Aui=React.createClass({propTypes:{children:React.PropTypes.element.isRequired},render:function(){function t(e){if(Array.isArray(e))return e.map(t);if(React.isValidElement(e)&&e.props&&e.props.noaui!==!0&&e.type!==Semantic){var n={className:Object.keys(e.props).filter(function(t){return e.props[t]===!0||moduleSearch.test(t)}).join(" ")};if(e.key&&(n.key=e.key),e.ref&&(n.ref=e.ref),e.props.children&&(n.children=t(e.props.children),(/\bform\b/.test(n.className)||/\bform\b/.test(e.props.className))&&(n.children=Array.isArray(n.children)?n.children:[n.children],e.props.onSubmit&&(n.onFormSubmit=e.props.onSubmit,n.onSubmit=null),n.children.unshift(React.createElement("input",{type:"submit",style:{display:"none"}})))),e=cloneWithProps(e,n),jQuery&&moduleSearch.test(e.props.className)&&jQuery.fn[moduleSearch.exec(e.props.className)[0]])return React.createElement(Semantic,{},e)}return e}return t(this.props.children)}}),Semantic=React.createClass({propTypes:{children:React.PropTypes.element.isRequired},getInitialState:function(){return{formData:{}}},onFormInput:function(t){var e=t.target;setTimeout(function(){var t=this.state.formData;t[e.name]=e.value,this.setState({formData:t})}.bind(this))},componentWillMount:function(){var t=this.props.children.props.onInput,e=this.onFormInput;this.bothFormOnInput=function(){e.apply(this,arguments),t&&t.apply(this,arguments)}},render:function(){return this.props.children.props.form?cloneWithProps(this.props.children,{onInput:this.bothFormOnInput}):this.props.children},componentDidMount:function(){function t(){}function e(e){var n=e.filter("select,input")[0]||e.parents(".dropdown:first").find("select,input")[0]||e[0]||o[0];this.type="input",this.timeStamp=Date.now(),this.target=n,this.preventDefault=this.isPersistent=this.isDefaultPrevented=this.isPropagationStopped=this.destructor=this.spotPropagation=t}var n=this,r=this.props.children.props,o=jQuery(this.getDOMNode()),i=this.bothFormOnInput;r.name&&o.attr("data-name",r.name),r.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(t){var a=r[t];if(a){a=Array.isArray(a)?a:[a];var s=a[a.length-1]=a[a.length-1]||{};if(s===!0&&(s=a[a.length-1]={}),"form"===t&&(a[1]||(a[1]={}),r.onFormSubmit&&(a[1].onSuccess=function(t){t.isTrigger?(t.data=n.state.formData,r.onFormSubmit.apply(this,arguments)):t.preventDefault()}),s=a[1],setTimeout(function(){o.find("[data-name]").each(function(t,e){var r=jQuery(e),o=n.state.formData;o[r.attr("data-name")]=r.val()})})),"object"==typeof s){var p=s.onChange;Object.keys(r).filter(function(t){return/^on[A-Z]/.test(t)}).map(function(t){/^on(Input|Change)$/.test(t)||(s[t]=r[t]),o.data(t,r[t])}),"form"===t&&o.data("onInput",i),s.onChange=function(t,n,o){p&&p.apply(this,arguments),r.onInput&&r.onInput.call(this,new e(o)),r.onChange&&r.onChange.call(this,new e(o));var i=o.parents(".form:first");i[0]&&(i.data("onChange")&&i.data("onChange").call(this,new e(o)),i.data("onInput")&&i.data("onInput").call(this,new e(o)))}}o[t].apply(o,a),r.name&&setTimeout(function(){var t=o.parents(".form:first").data("onInput");t&&t(new e(o))})}})},behaviors:{},shouldComponentUpdate:function(){var t=this,e=this.props.children.props,n=jQuery(this.getDOMNode());return e.className.split(" ").filter(function(t){return moduleSearch.test(t)}).map(function(r){var o=Array.isArray(e[r])?e[r]:[e[r]];"string"==typeof o[0]&&t.behaviors[r]!==JSON.stringify(o)&&(t.behaviors[r]=JSON.stringify(o),console.log(r,o),n[r].apply(n,o))}),!0},componentWillUnmount:function(){jQuery(this.getDOMNode()).remove()}});if(!module)var module={},exports;module.exports=exports=global.Aui=Aui,exports.Aui=Aui,exports.Semantic=Semantic,jQuery&&(exports.api=jQuery.fn.api);